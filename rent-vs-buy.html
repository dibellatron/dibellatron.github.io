<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Rent vs Buy Calculator</title>
    <link rel="stylesheet" href="rent-vs-buy.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <h1>Enhanced Rent vs Buy Calculator</h1>
        <p class="subtitle">Compare renting vs buying with rental income from house hacking</p>
        
        <div class="calculator-container">
            <div class="input-section">
                <h2>Renting</h2>
                <div class="input-group">
                    <label for="monthlyRent">Rent (monthly) ($)</label>
                    <input type="number" id="monthlyRent" value="2500" min="0" step="50">
                </div>
                
                <div class="input-group">
                    <label for="securityDeposit">Security deposit (months' rent)</label>
                    <input type="number" id="securityDeposit" value="1" min="0" max="6" step="0.5">
                </div>
                
                <div class="options-toggle">
                    <button type="button" class="toggle-btn" onclick="toggleOptions('renting-options')">
                        <span id="renting-toggle-text">SHOW OPTIONS</span>
                    </button>
                </div>
                
                <div id="renting-options" class="hidden-options">
                    <div class="input-group">
                        <label for="rentersInsurance">Renter's insurance (monthly) ($)</label>
                        <input type="number" id="rentersInsurance" value="15" min="0" step="5">
                    </div>
                    
                    <div class="input-group">
                        <label for="brokerFee">Broker fee ($)</label>
                        <input type="number" id="brokerFee" value="0" min="0" step="100">
                        <small>One-time fee, often one month's rent</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="rentIncrease">Rent increase (yearly) (%)</label>
                        <input type="number" id="rentIncrease" value="3.0" min="0" max="20" step="0.1">
                    </div>
                </div>
                
                <h2>Buying</h2>
                <div class="input-group">
                    <label for="homePrice">Purchase price ($)</label>
                    <input type="number" id="homePrice" value="400000" min="0" step="1000">
                </div>
                
                <div class="input-group">
                    <label for="downPayment">Down payment ($)</label>
                    <input type="number" id="downPayment" value="80000" min="0" step="1000">
                </div>
                
                <div class="input-group">
                    <label for="mortgageTerm">Loan term (years)</label>
                    <input type="number" id="mortgageTerm" value="30" min="1" max="50">
                </div>
                
                <div class="input-group">
                    <label for="interestRate">Interest rate (%)</label>
                    <input type="number" id="interestRate" value="7.0" min="0" max="20" step="0.1">
                </div>
                
                <div class="options-toggle">
                    <button type="button" class="toggle-btn" onclick="toggleOptions('buying-options')">
                        <span id="buying-toggle-text">SHOW OPTIONS</span>
                    </button>
                </div>
                
                <div id="buying-options" class="hidden-options">
                    <div class="input-group">
                        <label for="closingCosts">Closing costs (% of purchase price)</label>
                        <input type="number" id="closingCosts" value="3.0" min="0" max="10" step="0.1">
                        <small>Loan origination, appraisal, inspection, attorney fees</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="propertyTaxRate">Property tax rate (%)</label>
                        <input type="number" id="propertyTaxRate" value="1.5" min="0" max="5" step="0.1">
                        <small>Annual property tax as % of home value</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="homeInsurance">Homeowner's insurance (yearly) ($)</label>
                        <input type="number" id="homeInsurance" value="1200" min="0" step="50">
                    </div>
                    
                    <div class="input-group">
                        <label for="hoaFees">HOA fees (monthly) ($)</label>
                        <input type="number" id="hoaFees" value="0" min="0" step="25">
                    </div>
                    
                    <div class="input-group">
                        <label for="pmi">Private mortgage insurance (PMI) (monthly) ($)</label>
                        <input type="number" id="pmi" value="0" min="0" step="25">
                        <small>Required if down payment < 20%</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="additionalUtilities">Additional utility costs (monthly) ($)</label>
                        <input type="number" id="additionalUtilities" value="100" min="0" step="25">
                        <small>Extra utilities vs renting (heating/cooling larger space)</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="maintenanceRate">Home repairs and maintenance (yearly) (% of home value)</label>
                        <input type="number" id="maintenanceRate" value="1.5" min="0" max="5" step="0.1">
                    </div>
                    
                    <div class="input-group">
                        <label for="sellingCosts">Selling costs (% of home value)</label>
                        <input type="number" id="sellingCosts" value="6.0" min="0" max="15" step="0.5">
                        <small>Realtor fees, transfer taxes, etc.</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="homeAppreciation">Home appreciation (yearly) (%)</label>
                        <input type="number" id="homeAppreciation" value="3.0" min="0" max="20" step="0.1">
                    </div>
                </div>
                
                <h2>House Hacking Income</h2>
                <div class="input-group">
                    <label for="rentalIncome">Monthly rental income ($)</label>
                    <input type="number" id="rentalIncome" value="800" min="0" step="50">
                    <small>Income from renting out a room/basement/ADU</small>
                </div>
                
                <h2>Additional info</h2>
                <div class="input-group">
                    <label for="timeframe">How many years will you stay?</label>
                    <input type="number" id="timeframe" value="7" min="1" max="30">
                </div>
                
                <div class="input-group">
                    <label for="investmentReturn">Annual rate of return (%)</label>
                    <input type="number" id="investmentReturn" value="7.0" min="0" max="20" step="0.1">
                    <small>What you could earn by investing instead</small>
                </div>
                
                <div class="input-group">
                    <label for="monthlyInvestmentAmount">Monthly investment amount ($)</label>
                    <input type="number" id="monthlyInvestmentAmount" value="500" min="0" step="50">
                    <small>How much you would invest monthly if you chose the cheaper housing option</small>
                </div>
                
                <div class="options-toggle">
                    <button type="button" class="toggle-btn" onclick="toggleOptions('additional-options')">
                        <span id="additional-toggle-text">SHOW OPTIONS</span>
                    </button>
                </div>
                
                <div id="additional-options" class="hidden-options">
                    <div class="input-group">
                        <label for="filingStatus">Tax filing status</label>
                        <select id="filingStatus">
                            <option value="single">Single</option>
                            <option value="marriedJoint">Married filing jointly</option>
                            <option value="marriedSeparate">Married filing separately</option>
                            <option value="headOfHousehold">Head of household</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="marginalTaxRate">Marginal tax rate (%)</label>
                        <input type="number" id="marginalTaxRate" value="22" min="0" max="50" step="1">
                        <small>Your highest tax bracket rate</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="capitalGainsTaxRate">Capital gains tax rate (%)</label>
                        <input type="number" id="capitalGainsTaxRate" value="15" min="0" max="25" step="1">
                        <small>Long-term capital gains rate</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="inflationRate">General inflation rate (%)</label>
                        <input type="number" id="inflationRate" value="2.5" min="0" max="10" step="0.1">
                        <small>Expected annual inflation</small>
                    </div>
                </div>
                
                <button onclick="calculateComparison()" class="calculate-btn">Calculate</button>
            </div>
            
            <div class="results-section">
                <h2>Results</h2>
                <div id="results">
                    <p>Enter your details and click Calculate to see the comparison</p>
                </div>
                
                <div class="chart-container">
                    <h3>Monthly Cash Flow Comparison</h3>
                    <p><small>What you'll actually pay each month (not including equity building)</small></p>
                    <canvas id="monthlyCashFlowChart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>True Cost Comparison Over Time</h3>
                    <p><small>Shows cumulative net cost accounting for equity building and home appreciation</small></p>
                    <canvas id="breakEvenChart"></canvas>
                </div>
                
                <div id="detailedBreakdown"></div>
            </div>
        </div>
    </div>
    
    <script src="rent-vs-buy.js"></script>
</body>
</html>